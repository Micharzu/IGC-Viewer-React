{"version":3,"sources":["DataContext.js","Input/InputField.js","Content/Component/SimpleComponent.js","Content/Features/Graph.js","Content/Features/Map.js","Content/Content.js","Content/ContentGuard.js","App.js","index.js"],"names":["DataContext","createContext","DataProvider","props","useState","flightFile","setFlightFile","flightData","setFlightData","flightObject","setFlightObject","additionalContentObject","setAdditionalContentObject","mainContentObject","setMainContentObject","useEffect","clearData","updateData","updateObject","console","log","split","a","updateObjectData","checkFile","createContentObjects","timeInSecs","timeStr","parseInt","slice","flightTimeInSecs","firstRec","length","getFlightTimeInSecs","hours","Math","trunc","seconds","minutes","minPref","secPref","flightTimeStr","additionalObjTemp","FRID","DTE","Sec","PLTPILOT","flightTime","text","value","getTimeString","record","lastRec","flightStart","flightFinnish","getPositionStr","strArr","startingPosition","finishingPosition","flightDate","filteredData","filter","item","index","push","mainObjectTemp","forEach","charAt","i","indexOf","characters","GTYGLIDERTYPE","CCLCOMPETITION_CLASS","TZNTIMEZONE","includes","Error","e","message","Provider","targetFile","mContentObject","aContentObject","children","InputField","useContext","proxy","fileURL","setFileURL","search","setSearch","getFile","fetch","response","onSubmit","preventDefault","className","type","onChange","target","SimpleComponent","classNames","classAdded","join","graphStyles","position","width","height","Graph","startTime","chartDataset","setChartDataset","formatChartDataset","chartData","time","timeInterval","getTimeIntervalInMins","absoluteAltitude","currentTimeInSecs","currentTimeDiff","chartRecord","x","round","y","data","datasets","showLine","borderColor","pointBackgroundColor","pointRadius","pointHitRadius","options","title","display","legend","responsive","scales","yAxes","scaleLabel","labelString","xAxes","chart","setChart","prevState","style","mapStyles","GoogleApiWrapper","apiKey","positions","setPositions","pathArr","setPathArr","firstFlightRecord","lastFlightRecord","newStartPosition","calculatePosition","newFinnishPosition","startPositionDD","finnishPositionDD","mapPositionDD","lat","lng","newPathArr","map","rec","calculateDecMinToDecDeg","degBitNumber","coords","decMinStr","sign","decDegFloat","parseFloat","degFloat","Number","toFixed","google","zoom","initialCenter","center","label","fontSize","fontWeight","color","path","geodesic","strokeColor","strokeOpacity","strokeWeight","Content","mainContentObj","additionalContentObj","displayAdditionalContent","setDisplayAdditionalContent","contentManagerBtnText","setContentManagerBtnText","key","onClick","Object","entries","prop","Map","ContentGuard","mainContentAvailable","setMainContentAvailable","additionalContentAvailable","setAdditionalContentAvailable","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9b83ca4f.chunk.js","sourcesContent":["import React, { useState, useEffect, createContext } from \"react\";\r\n\r\nexport const DataContext = createContext();\r\n\r\nexport const DataProvider = (props) => {\r\n  const [flightFile, setFlightFile] = useState(\"\");\r\n  const [flightData, setFlightData] = useState();\r\n  const [flightObject, setFlightObject] = useState({});\r\n  const [additionalContentObject, setAdditionalContentObject] = useState();\r\n  const [mainContentObject, setMainContentObject] = useState();\r\n\r\n  useEffect(() => {\r\n    clearData();\r\n    updateData();\r\n  }, [flightFile]);\r\n\r\n  useEffect(() => {\r\n    updateObject();\r\n  }, [flightData]);\r\n\r\n  const clearData = () => {\r\n    console.log(\"Clearing Data!\");\r\n    setFlightData();\r\n    setFlightObject({});\r\n  };\r\n\r\n  const updateData = () => {\r\n    if (flightFile) {\r\n      setFlightData(flightFile.split(\"\\n\"));\r\n    }\r\n  };\r\n\r\n  const updateObject = async () => {\r\n    if (flightData) {\r\n      await updateObjectData();\r\n      await checkFile();\r\n      createContentObjects();\r\n    }\r\n  };\r\n\r\n  const getFlightTimeInSecs = () => {\r\n    let firstRec = timeInSecs(flightObject.flightData[0].slice(0, 6));\r\n    let lastRec = timeInSecs(\r\n      flightObject.flightData[flightObject.flightData.length - 1].slice(0, 6)\r\n    );\r\n    return lastRec - firstRec;\r\n  };\r\n\r\n  const timeInSecs = (timeStr) => {\r\n    return (\r\n      parseInt(timeStr.slice(0, 2)) * 3600 +\r\n      parseInt(timeStr.slice(2, 4)) * 60 +\r\n      parseInt(timeStr.slice(4, 6))\r\n    );\r\n  };\r\n\r\n  const createContentObjects = () => {\r\n    //time\r\n    let flightTimeInSecs = getFlightTimeInSecs();\r\n\r\n    let hours = Math.trunc(flightTimeInSecs / 3600);\r\n    let seconds = flightTimeInSecs % 3600;\r\n    let minutes = Math.trunc(seconds / 60);\r\n    seconds = seconds % 60;\r\n\r\n    let minPref = minutes >= 10 ? \"\" : 0;\r\n    let secPref = seconds >= 10 ? \"\" : 0;\r\n\r\n    let flightTimeStr = `${hours}:${minPref}${minutes}:${secPref}${seconds}`;\r\n\r\n    //additionalObj base\r\n    let {\r\n      FRID,\r\n      DTE,\r\n      Sec,\r\n      PLTPILOT,\r\n      flightData,\r\n      ...additionalObjTemp\r\n    } = flightObject;\r\n\r\n    //extending additionalObj\r\n\r\n    additionalObjTemp.flightTime = {\r\n      text: \"Łączny czas lotu\",\r\n      value: flightTimeStr,\r\n    };\r\n\r\n    const getTimeString = (record) => {\r\n      return `${record.slice(0, 2)}:${record.slice(2, 4)}:${record.slice(\r\n        4,\r\n        6\r\n      )}`;\r\n    };\r\n\r\n    let firstRec = flightObject.flightData[0];\r\n    let lastRec = flightObject.flightData[flightObject.flightData.length - 1];\r\n\r\n    let flightStart = getTimeString(firstRec);\r\n    let flightFinnish = getTimeString(lastRec);\r\n\r\n    additionalObjTemp.flightStart = {\r\n      text: \"Odlot\",\r\n      value: flightStart,\r\n    };\r\n    additionalObjTemp.flightFinnish = {\r\n      text: \"Lądowanie\",\r\n      value: flightFinnish,\r\n    };\r\n\r\n    const getPositionStr = (strArr) => {\r\n      const altitudeStr =\r\n        strArr.slice(6, 8) +\r\n        \"° \" +\r\n        strArr.slice(8, 10) +\r\n        \".\" +\r\n        strArr.slice(10, 13) +\r\n        \"'\" +\r\n        strArr.slice(13, 14);\r\n\r\n      const latitudeStr =\r\n        strArr.slice(14, 17) +\r\n        \"° \" +\r\n        strArr.slice(17, 19) +\r\n        \".\" +\r\n        strArr.slice(19, 22) +\r\n        \"'\" +\r\n        strArr.slice(22, 23);\r\n\r\n      const positionStr = altitudeStr + \" \" + latitudeStr;\r\n      return positionStr;\r\n    };\r\n\r\n    additionalObjTemp.startingPosition = {\r\n      text: \"Miejsce odlotu\",\r\n      value: getPositionStr(firstRec),\r\n    };\r\n\r\n    additionalObjTemp.finishingPosition = {\r\n      text: \"Miejsce lądowania\",\r\n      value: getPositionStr(lastRec),\r\n    };\r\n\r\n    setAdditionalContentObject(additionalObjTemp);\r\n\r\n    //mainObj\r\n    let flightDate = `${flightObject.DTE.slice(0, 2)}/${flightObject.DTE.slice(\r\n      2,\r\n      4\r\n    )}/20${flightObject.DTE.slice(4)}`;\r\n\r\n    let filteredData = flightObject.flightData.filter((item, index) => {\r\n      return index % 6 === 0;\r\n    });\r\n    if (\r\n      filteredData[filteredData.length - 1] !==\r\n      flightObject.flightData[flightObject.flightData.length - 1]\r\n    ) {\r\n      filteredData.push(\r\n        flightObject.flightData[flightObject.flightData.length - 1]\r\n      );\r\n    }\r\n\r\n    const mainObjectTemp = (({ FRID, Sec, PLTPILOT, flightData }) => ({\r\n      PLTPILOT,\r\n      flightDate,\r\n      flightData,\r\n      filteredData,\r\n      flightTimeInSecs,\r\n    }))(flightObject);\r\n    setMainContentObject(mainObjectTemp);\r\n  };\r\n\r\n  const updateObjectData = () => {\r\n    if (typeof flightData === \"object\") {\r\n      flightObject.flightData = [];\r\n      flightData.forEach((item, index) => {\r\n        if (index === 0) {\r\n          flightObject.FRID = item;\r\n        }\r\n        switch (item.charAt(0)) {\r\n          case \"B\": {\r\n            flightObject.flightData.push(item.slice(1));\r\n            break;\r\n          }\r\n          case \"G\": {\r\n            flightObject.Sec = item.slice(1);\r\n            break;\r\n          }\r\n          case \"H\": {\r\n            let i = item.indexOf(\":\");\r\n            let isSpaceI = item.indexOf(\": \") === i ? 1 : 0;\r\n            let characters = isSpaceI + 1;\r\n\r\n            switch (item.slice(2, i)) {\r\n              case \"GTYGLIDERTYPE\": {\r\n                flightObject.GTYGLIDERTYPE = {\r\n                  text: \"Typ lotni\",\r\n                  value: item.slice(i + characters),\r\n                };\r\n                break;\r\n              }\r\n              case \"CCLCOMPETITION CLASS\": {\r\n                flightObject.CCLCOMPETITION_CLASS = {\r\n                  text: \"Typ zawodów\",\r\n                  value: item.slice(i + characters),\r\n                };\r\n                break;\r\n              }\r\n              case \"TZNTIMEZONE\": {\r\n                flightObject.TZNTIMEZONE = {\r\n                  text: \"Strefa czasowa\",\r\n                  value: item.slice(i + characters),\r\n                };\r\n                break;\r\n              }\r\n              default: {\r\n                if (item.includes(\"DTE\")) {\r\n                  if (i !== -1) {\r\n                    flightObject.DTE = item.slice(\r\n                      i + characters,\r\n                      i + characters + 6\r\n                    );\r\n                    break;\r\n                  }\r\n                  flightObject.DTE = item.slice(5, 11);\r\n                  break;\r\n                }\r\n                if (item.includes(\"PLTPILOT\")) {\r\n                  flightObject.PLTPILOT = item.slice(i + characters);\r\n                  break;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const checkFile = () => {\r\n    try {\r\n      if (flightObject.FRID.charAt(0) !== \"A\") {\r\n        throw new Error(\"IGC file must contain an ID!\");\r\n      }\r\n      if (!flightObject.Sec) {\r\n        throw new Error(\"IGC file must contain a security code!\");\r\n      }\r\n    } catch (e) {\r\n      console.log(\"An error has occured: \" + e.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <DataContext.Provider\r\n      value={{\r\n        targetFile: [flightFile, setFlightFile],\r\n        mContentObject: [mainContentObject, setMainContentObject],\r\n        aContentObject: [additionalContentObject, setAdditionalContentObject],\r\n      }}\r\n    >\r\n      {props.children}\r\n    </DataContext.Provider>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { DataContext } from \"../DataContext\";\r\nimport \"./InputField.css\";\r\n\r\nconst InputField = () => {\r\n  const { targetFile } = useContext(DataContext);\r\n\r\n  const [flightFile, setFlightFile] = targetFile;\r\n\r\n  //sampleFile\r\n  const sampleFile =\r\n    \"https://xcportal.pl/sites/default/files/tracks/2020-06-09/069daro396091568.igc\";\r\n  //proxy\r\n  const proxy = \"https://cors-anywhere.herokuapp.com/\";\r\n\r\n  //state of URL of active igc file\r\n  const [fileURL, setFileURL] = useState(proxy + sampleFile);\r\n\r\n  //input state\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (fileURL.slice(-4) === \".igc\") {\r\n      getFile();\r\n    }\r\n  }, [fileURL]);\r\n\r\n  const getFile = async () => {\r\n    const response = await fetch(proxy + fileURL);\r\n    setFlightFile(await response.text());\r\n  };\r\n\r\n  const updateSearch = (e) => {\r\n    setSearch(e.target.value);\r\n  };\r\n\r\n  const getSearch = (e) => {\r\n    e.preventDefault();\r\n    console.log(search);\r\n    setFileURL(search);\r\n    setSearch(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={getSearch} className=\"urlInputForm\">\r\n        <h3>Wklej tutaj URL wybranego pliku .igc</h3>\r\n        <div className=\"urlInputSection\">\r\n          <input\r\n            className=\"urlInput\"\r\n            type=\"url\"\r\n            value={search}\r\n            onChange={updateSearch}\r\n          />\r\n          <button className=\"urlInputButton\" type=\"submit\">\r\n            Wybierz plik\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InputField;\r\n","import React from \"react\";\r\nimport \"./SimpleComponent.css\";\r\n\r\nconst SimpleComponent = (props) => {\r\n  const classNames = [\"componentRecord\", props.classAdded].join(\" \");\r\n  return (\r\n    <div className={classNames}>\r\n      <h3>{props.text}</h3>\r\n      <h3>{props.value}</h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimpleComponent;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Scatter } from \"react-chartjs-2\";\r\n\r\nconst graphStyles = {\r\n  position: \"relative\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n};\r\n\r\nconst Graph = (props) => {\r\n  let firstRecord = props.flightData[0];\r\n  let lastRecord = props.flightData[props.flightData.length - 1];\r\n\r\n  const [chartDataset, setChartDataset] = useState([]);\r\n  const lineColor = \"rgba(230, 65, 47, 0.9)\";\r\n\r\n  useEffect(() => {\r\n    formatChartDataset();\r\n  }, [props.flightData]);\r\n\r\n  let startTime;\r\n  let chartData = [];\r\n\r\n  const getTimeIntervalInMins = (time) => {\r\n    let timeInterval = [5, 10, 15, 30, 60];\r\n\r\n    for (let i = 0; i < timeInterval.length - 1; i++) {\r\n      if (time / 8 < timeInterval[i] * 60) {\r\n        return timeInterval[i];\r\n      }\r\n    }\r\n    return timeInterval[timeInterval.length - 1];\r\n  };\r\n\r\n  const timeIntervalInMins = getTimeIntervalInMins(props.flightTimeInSecs);\r\n\r\n  const timeInSecs = (timeStr) => {\r\n    return (\r\n      parseInt(timeStr.slice(0, 2)) * 3600 +\r\n      parseInt(timeStr.slice(2, 4)) * 60 +\r\n      parseInt(timeStr.slice(4, 6))\r\n    );\r\n  };\r\n\r\n  //formating chart dataSet\r\n  const formatChartDataset = () => {\r\n    props.flightData.forEach((item, index) => {\r\n      let absoluteAltitude = parseInt(item.slice(29, 34));\r\n\r\n      let currentTimeInSecs = timeInSecs(item.slice(0, 6));\r\n\r\n      if (index === 0) {\r\n        startTime = currentTimeInSecs;\r\n      }\r\n      let currentTimeDiff = currentTimeInSecs - startTime;\r\n\r\n      //converting to minutes\r\n      let chartRecord = {\r\n        x: Math.round((currentTimeDiff / 60) * 10) / 10,\r\n        y: absoluteAltitude,\r\n      };\r\n      chartData.push(chartRecord);\r\n    });\r\n    setChartDataset(chartData);\r\n  };\r\n\r\n  const [chart, setChart] = useState({\r\n    data: {\r\n      datasets: [\r\n        {\r\n          data: chartDataset,\r\n          showLine: true,\r\n          borderColor: lineColor,\r\n\r\n          pointBackgroundColor: \"lightblue\",\r\n          pointRadius: 0,\r\n          pointHitRadius: 5,\r\n        },\r\n      ],\r\n    },\r\n    options: {\r\n      title: {\r\n        display: true,\r\n        text: \"Wysokość npm podczas lotu\",\r\n      },\r\n      legend: {\r\n        display: false,\r\n      },\r\n      responsive: true,\r\n      scales: {\r\n        yAxes: [\r\n          {\r\n            scaleLabel: {\r\n              labelString: \"Wysokość (m)\",\r\n              display: true,\r\n            },\r\n          },\r\n        ],\r\n        xAxes: [\r\n          {\r\n            scaleLabel: {\r\n              labelString: \"Czas lotu (min)\",\r\n              display: true,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setChart((prevState) => ({\r\n      ...prevState,\r\n      data: {\r\n        datasets: [\r\n          {\r\n            data: chartDataset,\r\n            showLine: true,\r\n            borderColor: lineColor,\r\n\r\n            pointBackgroundColor: \"lightblue\",\r\n            pointRadius: 0,\r\n            pointHitRadius: 5,\r\n          },\r\n        ],\r\n      },\r\n    }));\r\n  }, [chartDataset]);\r\n\r\n  return (\r\n    <div className=\"graphInner\" style={graphStyles}>\r\n      <Scatter data={chart.data} options={chart.options} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Graph;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Map, GoogleApiWrapper, Marker, Polyline } from \"google-maps-react\";\r\n\r\nconst mapStyles = {\r\n  position: \"relative\",\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n};\r\n\r\nconst MapContainer = (props) => {\r\n  const [positions, setPositions] = useState({});\r\n  const [pathArr, setPathArr] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const firstFlightRecord = props.flightData[0];\r\n    const lastFlightRecord = props.flightData[props.flightData.length - 1];\r\n\r\n    let newStartPosition = calculatePosition(firstFlightRecord);\r\n    let newFinnishPosition = calculatePosition(lastFlightRecord);\r\n\r\n    setPositions({\r\n      startPositionDD: newStartPosition,\r\n      finnishPositionDD: newFinnishPosition,\r\n\r\n      mapPositionDD: {\r\n        lat: (newStartPosition.lat + newFinnishPosition.lat) / 2,\r\n        lng: (newStartPosition.lng + newFinnishPosition.lng) / 2,\r\n      },\r\n    });\r\n\r\n    let newPathArr = props.flightData.map((rec) => calculatePosition(rec));\r\n\r\n    setPathArr(newPathArr);\r\n  }, [props.flightData]);\r\n\r\n  const calculateDecMinToDecDeg = (degBitNumber, coords) => {\r\n    let decMinStr =\r\n      coords.slice(degBitNumber, degBitNumber + 2) +\r\n      \".\" +\r\n      coords.slice(degBitNumber + 2, degBitNumber + 5);\r\n    if (decMinStr[0] === \"0\") {\r\n      decMinStr = decMinStr.slice(1);\r\n    }\r\n    let sign = 1;\r\n\r\n    if (\r\n      coords.slice(degBitNumber + 5) === \"S\" ||\r\n      coords.slice(degBitNumber + 5) === \"W\"\r\n    ) {\r\n      sign = -1;\r\n    }\r\n\r\n    let decDegFloat = parseFloat(decMinStr) / 60;\r\n    let degFloat = parseFloat(coords.slice(0, degBitNumber));\r\n    let positionInDecDeg = Number((degFloat + decDegFloat).toFixed(6)) * sign;\r\n\r\n    return positionInDecDeg;\r\n  };\r\n\r\n  const calculatePosition = (record) => {\r\n    let recordObj = {\r\n      lat: calculateDecMinToDecDeg(2, record.slice(6, 14)),\r\n      lng: calculateDecMinToDecDeg(3, record.slice(14, 23)),\r\n    };\r\n\r\n    return recordObj;\r\n  };\r\n\r\n  if (positions.mapPositionDD) {\r\n    return (\r\n      <div className=\"mapInner\">\r\n        <Map\r\n          google={props.google}\r\n          zoom={7}\r\n          style={mapStyles}\r\n          initialCenter={positions.mapPositionDD}\r\n          center={positions.mapPositionDD}\r\n        >\r\n          <Marker\r\n            label={{\r\n              text: \"Początek\",\r\n              fontSize: \"16px\",\r\n              fontWeight: \"700\",\r\n              color: \"rgb(30, 30, 30)\",\r\n            }}\r\n            position={positions.startPositionDD}\r\n          />\r\n          <Marker\r\n            label={{\r\n              text: \"Koniec\",\r\n              fontSize: \"16px\",\r\n              fontWeight: \"700\",\r\n              color: \"rgb(30, 30, 30)\",\r\n            }}\r\n            position={positions.finnishPositionDD}\r\n          />\r\n          <Polyline\r\n            path={pathArr}\r\n            geodesic={true}\r\n            options={{\r\n              strokeColor: \"rgba(230, 65, 47, 0.9)\",\r\n              strokeOpacity: 0.75,\r\n              strokeWeight: 3,\r\n            }}\r\n          />\r\n        </Map>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h3>Ładowanie...</h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GoogleApiWrapper({\r\n  apiKey: \"AIzaSyDrqc5R65cKDZMVxzoN172YnlLCGKiHNM4\",\r\n})(MapContainer);\r\n","import React, { useState, useContext } from \"react\";\r\nimport { DataContext } from \"../DataContext\";\r\nimport \"./Content.css\";\r\n\r\nimport SimpleComponent from \"./Component/SimpleComponent\";\r\nimport Graph from \"./Features/Graph\";\r\nimport Map from \"./Features/Map\";\r\n\r\nconst Content = () => {\r\n  const { mContentObject, aContentObject } = useContext(DataContext);\r\n\r\n  const [mainContentObj, setMainContentObj] = mContentObject;\r\n  const [additionalContentObj, setAdditionalContentObj] = aContentObject;\r\n\r\n  const [displayAdditionalContent, setDisplayAdditionalContent] = useState(\r\n    false\r\n  );\r\n  const [contentManagerBtnText, setContentManagerBtnText] = useState(\r\n    \"Pokaż dodatkowe informacje\"\r\n  );\r\n\r\n  const toggleContent = () => {\r\n    if (displayAdditionalContent) {\r\n      setDisplayAdditionalContent(false);\r\n      setContentManagerBtnText(\"Pokaż dodatkowe informacje\");\r\n    } else {\r\n      setContentManagerBtnText(\"Ukryj dodatkowe informacje\");\r\n      setDisplayAdditionalContent(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"content\">\r\n      <div className=\"mainInfo\">\r\n        <SimpleComponent\r\n          key={\"PLTPILOT\"}\r\n          text={\"Nazwa Pilota\"}\r\n          value={mainContentObj.PLTPILOT}\r\n          classAdded={\"mainInfo\"}\r\n        />\r\n        <SimpleComponent\r\n          key={\"flightDate\"}\r\n          text={\"Data lotu\"}\r\n          value={mainContentObj.flightDate}\r\n          classAdded={\"mainInfo\"}\r\n        />\r\n      </div>\r\n      <button className=\"toggleBtn\" onClick={toggleContent}>\r\n        {contentManagerBtnText}\r\n      </button>\r\n      <div className=\"additionalInfo\">\r\n        {displayAdditionalContent && (\r\n          <>\r\n            {Object.entries(additionalContentObj).map((prop) => (\r\n              <SimpleComponent\r\n                key={prop[0]}\r\n                text={prop[1].text}\r\n                value={prop[1].value}\r\n                classAdded={\"additionalInfo\"}\r\n              />\r\n            ))}\r\n            <div className=\"features\">\r\n              <div className=\"graph\">\r\n                <Graph\r\n                  flightData={mainContentObj.filteredData}\r\n                  flightTimeInSecs={mainContentObj.flightTimeInSecs}\r\n                />\r\n              </div>\r\n              <div className=\"map\">\r\n                <Map\r\n                  flightData={mainContentObj.filteredData}\r\n                  flightTimeInSecs={mainContentObj.flightTimeInSecs}\r\n                />\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { DataContext } from \"../DataContext\";\r\nimport Content from \"./Content\";\r\n\r\nconst ContentGuard = () => {\r\n  const { mContentObject, aContentObject } = useContext(DataContext);\r\n\r\n  const [mainContentObj, setMainContentObj] = mContentObject;\r\n  const [additionalContentObj, setAdditionalContentObj] = aContentObject;\r\n  const [mainContentAvailable, setMainContentAvailable] = useState(false);\r\n  const [additionalContentAvailable, setAdditionalContentAvailable] = useState(\r\n    false\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (mainContentObj) {\r\n      if (typeof mainContentObj === \"object\") {\r\n        setMainContentAvailable(true);\r\n      } else {\r\n        setMainContentAvailable(false);\r\n      }\r\n    }\r\n  }, [mainContentObj]);\r\n\r\n  useEffect(() => {\r\n    if (additionalContentObj) {\r\n      if (typeof additionalContentObj === \"object\") {\r\n        setAdditionalContentAvailable(true);\r\n      } else {\r\n        setAdditionalContentAvailable(false);\r\n      }\r\n    }\r\n  }, [additionalContentObj]);\r\n\r\n  return (\r\n    <div>\r\n      {mainContentAvailable && additionalContentAvailable && <Content />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContentGuard;\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport InputField from \"./Input/InputField\";\r\nimport ContentGuard from \"./Content/ContentGuard\";\r\n\r\nimport { DataProvider } from \"./DataContext\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <DataProvider>\r\n      <div className=\"app\">\r\n        <div className=\"title\">\r\n          <h2>IGC VIEWER</h2>\r\n        </div>\r\n\r\n        <InputField />\r\n        <ContentGuard />\r\n      </div>\r\n    </DataProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}